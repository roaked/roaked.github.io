<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="System Dynamics # 1. System Dynamics Modeling # Breaking down the drone into subsystems helps manage its complexity. The quadrotor has three main parts:
Actuation System: This handles the rotors&rsquo; model, the forces they generate ( \(F_p\) ), and the moments they create ( \(M_p\) ). Each rotor gets an input voltage ( \(\V_{m_i}\) ) and produces an angular velocity ( \(\Omega\) i).
Movement System: This part deals with forces (not just from rotors but also external factors like wind) and moments that drive the drone&rsquo;s movement."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="Drone Dynamics"><meta property="og:description" content="System Dynamics # 1. System Dynamics Modeling # Breaking down the drone into subsystems helps manage its complexity. The quadrotor has three main parts:
Actuation System: This handles the rotors&rsquo; model, the forces they generate ( \(F_p\) ), and the moments they create ( \(M_p\) ). Each rotor gets an input voltage ( \(\V_{m_i}\) ) and produces an angular velocity ( \(\Omega\) i).
Movement System: This part deals with forces (not just from rotors but also external factors like wind) and moments that drive the drone&rsquo;s movement."><meta property="og:type" content="article"><meta property="og:url" content="https://xsleaks.dev/docs/2code/1drone/_index2/"><meta property="article:section" content="docs"><title>Drone Dynamics | Ricardo Chin</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz+OQteg=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.3e41230b6f9c9c24c8223f1a1dd56854e368032522c4d238596d444376c053c0.js integrity="sha256-PkEjC2+cnCTIIj8aHdVoVONoAyUixNI4WW1EQ3bAU8A=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Ricardo Chin</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/docs/1design/>Design Portfolio</a><ul><li><a href=/docs/1design/1mest/>Structural Mechanics</a><ul></ul></li><li><a href=/docs/1design/2thermo/>ThermoCup</a><ul></ul></li><li><a href=/docs/1design/3pmec/>Mechanical Project Design</a><ul></ul></li><li><a href=/docs/1design/4mcomp/>Finite Element Model Formulation</a><ul></ul></li><li><a href=/docs/1design/5om/>Compound Cylindrical Gear Train</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/docs/2code/>Coding Portfolio</a><ul><li><a href=/docs/2code/1drone/>RedBull Racing Competition</a><ul><li><a href=/docs/2code/1drone/_index2/ class=active>Drone Dynamics</a></li><li><a href=/docs/2code/1drone/_index3/>Drone Controller Design Pt. 1</a></li><li><a href=/docs/2code/1drone/_index4/>Drone Controller Design Pt. 2</a></li><li><a href=/docs/2code/1drone/_index10/>Drone Computer Vision</a></li></ul></li><li><a href=/docs/2code/3sint/>Deep Learning on Fake News</a><ul></ul></li><li><a href=/docs/2code/5od/>Evolutionary Computation</a><ul><li><a href=/docs/2code/5od/_index2/>Genetic Algorithm</a></li><li><a href=/docs/2code/5od/_index3/>Particle Swarm Optimization</a></li></ul></li><li><a href=/docs/2code/6auto/>Industrial Automation</a><ul></ul></li><li><a href=/docs/2code/7rman/>Manipulator Robotics: JACO</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/docs/3research/>Research</a><ul><li><a href=/docs/3research/1ebeam/>Electron Beam Welding</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Drone Dynamics</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#11-actuation-subsystem>1.1 Actuation Subsystem</a><ul><li><a href=#111-model-and-linearization>1.1.1 Model and Linearization</a></li><li><a href=#112-transfer-function-model>1.1.2 Transfer Function Model</a></li><li><a href=#113-stability>1.1.3 Stability</a></li><li><a href=#114-controllability>1.1.4 Controllability</a></li><li><a href=#115-observability>1.1.5 Observability</a></li></ul></li><li><a href=#12-movement-subsytem>1.2 Movement Subsytem</a></li></ul></nav></aside></header><article class=markdown><h1 id=system-dynamics><strong>System Dynamics</strong>
<a class=anchor href=#system-dynamics>#</a></h1><h1 id=1-system-dynamics-modeling>1. System Dynamics Modeling
<a class=anchor href=#1-system-dynamics-modeling>#</a></h1><p>Breaking down the drone into subsystems helps manage its complexity. The quadrotor has three main parts:</p><ul><li><p>Actuation System: This handles the rotors&rsquo; model, the forces they generate (
<link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>\(F_p\)
</span>), and the moments they create (<span>
\(M_p\)
</span>). Each rotor gets an input voltage (<span>
\(\V_{m_i}\)
</span>) and produces an angular velocity (<span>
\(\Omega\)
</span>i).</p></li><li><p>Movement System: This part deals with forces (not just from rotors but also external factors like wind) and moments that drive the drone&rsquo;s movement. It uses physics laws, dynamics, and kinematics to determine the drone&rsquo;s position and velocity.</p></li><li><p>Instrumentation System: This part involves the sensor model. In this project phase, the sensors are simplified as ideal sensors, meaning they have a gain of one.</p></li></ul><p>Breaking it down this way helps in focusing on and understanding each aspect separately, making the overall understanding and development of the drone more manageable.</p><h2 id=11-actuation-subsystem>1.1 Actuation Subsystem
<a class=anchor href=#11-actuation-subsystem>#</a></h2><p>The actuation subsystem involves individual DC motors powering propellers to generate lift forces in the drone&rsquo;s four independently controlled motors (i=1,2,3,4). The values of I and <span>\(\Omega\)
</span>change over time based on the applied motor voltage, Vm, while constants like Lm, Rm, Ke, Kt, and Jm characterize the motor. This results in a second-order system for each drone motor, expressed as:</p><span>\[\dot{\tilde{x}} = A\tilde{x} + B\tilde{u} = \begin{bmatrix} \dot{\tilde{I}}_i \\ \dot{\tilde{\Omega}} \end{bmatrix} = \begin{bmatrix} a_{11} & a_{12} \\ a_{21} & a_{22} \end{bmatrix} \begin{bmatrix} \tilde{I}_i \\ \Omega \end{bmatrix} + \begin{bmatrix} b_2 \\ 0 \end{bmatrix} \tilde{V}_m\]
</span><span>\[\tilde{y} = C\tilde{x} + D\tilde{u} = \Omega, \quad i = [0 \, 1]\]</span><p>The parameters in matrices A and B are determined by the motor specifications and the chosen flight conditions for linearization.</p><h3 id=111-model-and-linearization>1.1.1 Model and Linearization
<a class=anchor href=#111-model-and-linearization>#</a></h3><p>The actuation subsystem dynamics are defined by the following nonlinear equations:</p><span>\[\dot{I}_i = \frac{1}{L_m} (V_{mi} - R_{m}I_{i} - K_{e}\Omega_{i})\]
</span><span>\[\dot{\Omega}_i = \frac{1}{J_m} (K_t I_i - Q_i - B_m\Omega_{i})\]
</span><span>\[\text{Where: } Q_i = K_Q \Omega_i^2\]</span><p>To linearize this model, a nominal point around which small deviations are considered for the variables I, Vm and Ω is selected, representing the hovering condition:</p><span>\[I_i = I_o + \tilde{I}_i\]
</span><span>\[V_{mi} = V_{mo} + \tilde{V}_{mi}\]
</span><span>\[\Omega_i = \Omega_{i_o} + \tilde{\Omega}_{i}\]</span><p>Using these relationships, the linearized dynamics are obtained as:</p><span>\[\dot{\tilde{I}}_i = \frac{1}{L_m} (\tilde{V}_{m_i} - R_m \tilde{I}_i - K_e \tilde{\Omega}_i)\]
</span><span>\[\dot{\tilde{\Omega}}_i = \frac{1}{J_m} (K_t \tilde{I}_{i} - 2 K_Q \Omega_{i_o} \tilde{\Omega}_i - B_m \tilde{\Omega}_i)\]</span><p>The linearized state space model for each actuation subsystem, where the output is the motor angular speed, is given by:</p><span>\[\begin{bmatrix}
\dot{I}_i \\
\dot{\Omega}_i
\end{bmatrix} = \begin{bmatrix}
-\frac{R_m}{L_m} & -\frac{K_e}{L_m} \\
\frac{K_t}{J_m} & -\frac{K_Q \Omega_{i_o}+B_m}{J_m}
\end{bmatrix} \begin{bmatrix}
\tilde{I_i} \\
\tilde{\Omega}_i
\end{bmatrix} + \begin{bmatrix}
\frac{1}{L_m} \\
0
\end{bmatrix} \tilde{V}_{mi}\]</span><p>The state space variables are, therefore, <span>\( \tilde{I}_i \)
</span>and <span>\( \tilde{\Omega}_{i} \)
</span>. The only input provided to each motor is the applied voltage <span>\( \tilde{V}_{m_{i}} \)
</span>. The state space model for the complete actuation subsystem can be obtained by combining the state space models for each motor into a single state space model:</p><span>\[
\begin{bmatrix}
\dot{\tilde{I}}_1 \\
\dot{\tilde{\Omega}}_1 \\
\dot{\tilde{I}}_2 \\
\dot{\tilde{\Omega}}_2 \\
\dot{\tilde{I}}_3 \\
\dot{\tilde{\Omega}}_3 \\
\dot{\tilde{I}}_4 \\
\dot{\tilde{\Omega}}_4 \\
\end{bmatrix}
= \begin{bmatrix}
A_1 & 0 & 0 & 0 \\
0 & A_2 & 0 & 0 \\
0 & 0 & A_3 & 0 \\
0 & 0 & 0 & A_4 \\
\end{bmatrix}
\begin{bmatrix}
\tilde{I}_1 \\
\tilde{\Omega}_1 \\
\tilde{I}_2 \\
\tilde{\Omega}_2 \\
\tilde{I}_3 \\
\tilde{\Omega}_3 \\
\tilde{I}_4 \\
\tilde{\Omega}_4 \\
\end{bmatrix}
+
\begin{bmatrix}
B_1 & 0 & 0 & 0 \\
0 & B_2 & 0 & 0 \\
0 & 0 & B_3 & 0 \\
0 & 0 & 0 & B_4 \\
\end{bmatrix}
\begin{bmatrix}
\dot{\tilde{V}}_{m1} \\
0 \\
\dot{\tilde{V}}_{m2} \\
0 \\
\dot{\tilde{V}}_{m3} \\
0 \\
\dot{\tilde{V}}_{m4} \\
0 \\
\end{bmatrix} \\\]
</span><span>\[\begin{bmatrix}
\tilde{\Omega}_1 \\
\tilde{\Omega}_2 \\
\tilde{\Omega}_3 \\
\tilde{\Omega}_4 \\
\end{bmatrix}
= \begin{bmatrix}
0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 \\
\end{bmatrix}
\begin{bmatrix}
\tilde{I}_1 \\
\tilde{\Omega}_1 \\
\tilde{I}_2 \\
\tilde{\Omega}_2 \\
\tilde{I}_3 \\
\tilde{\Omega}_3 \\
\tilde{I}_4 \\
\tilde{\Omega}_4 \\
\end{bmatrix}\]</span><p>Each matrix Ai and Bi represent a 2 × 2 matrix. As all four motors share identical parameters, the matrices Ai and Bi exhibit identical properties. However, due to the independent dynamics of each motor, the subsystem analysis simplifies. Subsequent sections will confirm the motors&rsquo; rapid response times, allowing an approximation using a static gain, as demonstrated:</p><span>\[\delta_i = K_{\Omega} \Omega_i\]</span><p>With this outcome in consideration, we can represent the angular velocities <span>\(\Omega_i\)
</span>solely as a function of the voltage constant <span>\(K_{\Omega}_i\)
</span>and the actuations <span>\(\delta_i\)</span></p><span>\[\begin{bmatrix}
\Omega_1 \\
\Omega_2 \\
\Omega_3 \\
\Omega_4 \\
\end{bmatrix}
= \begin{bmatrix}
1 & K_{\Omega} & 0 & 0 \\
0 & 1 & K_{\Omega} & 0 \\
0 & 0 & 1 & K_{\Omega} \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
\begin{bmatrix}
\delta_1 \\
\delta_2 \\
\delta_3 \\
\delta_4 \\
\end{bmatrix} \\\]</span><p>This process essentially proportionally adjusts the input variables​ <span>\(\delta_i\)
</span>. Labeling the diagonal matrix as <span>\(T_M\)
</span>we can express this relationship by considering the linear deviations around the nominal operating point.</p><span>\[\tilde{\Omega} = T_M \tilde{\delta}\]</span><h3 id=112-transfer-function-model>1.1.2 Transfer Function Model
<a class=anchor href=#112-transfer-function-model>#</a></h3><p>With the state space model acquired for the actuation subsystem, it is possible to derive the transfer function.</p><span>\[G(s) = C(sI - A)^{-1}B + D\]</span><p>The relationship between the output (angular speed ​ <span>\(\tilde{\Omega}_i\)
</span>) and the input (applied voltage ​ <span>\(\tilde{V}_{mi}\)
</span>) is expressed as the transfer function:</p><span>\[G(s) = \frac{\tilde{\Omega}_i(s)}{\tilde{V}_{mi}(s)} = \begin{bmatrix} 0 & 1 \end{bmatrix} \begin{bmatrix} s + \frac{R_m}{L_m} & \frac{K_e}{L_m} \\ -\frac{K_t}{J_m} & s + \frac{2K_Q \Omega_{i_o} + B_m}{J_m} \end{bmatrix}^{-1} \begin{bmatrix} 1 \\ \frac{1}{L_m} \\ 0 \end{bmatrix}\]</span><p>When the aforementioned parameters are replaced with typical values for a DC motor, the resulting transfer function model can be represented.</p><span>\[G(s) = \frac{4.901 \times 10^6}{s^2 + 576.3s + 1.687 \times 10^5}\]</span><h3 id=113-stability>1.1.3 Stability
<a class=anchor href=#113-stability>#</a></h3><p>To assess stability, the system poles need computation, achievable through two approaches. First, by determining the roots of the denominator the defined transfer function G(s), or second, by computing the eigenvalues of matrix A as depicted as follows:</p><span>\[\text{det}(sI - A) = s^2 + 576.3s + 1.687 \times 10^5 = 0 \quad \Leftrightarrow \quad s = -288.13 \pm 292.67i \quad (21)\]</span><p>The poles, located in the left half-plane and forming complex conjugates, signify system stability. Expect an overshoot with a step input. The unit step response demonstrates a small overshoot (<span>
\(M_p\)
</span>= 4.54%) and rapid system response (<span>
\(T_s\)
</span>= 0.15s). Consequently, approximating the actuation subsystem as a static gain seems plausible. The root locus plot confirms system stability across various proportional controllers.</p><p><img src=https://live.staticflickr.com/65535/53346502082_8cc9596829_c.jpg alt=step1></p><h3 id=114-controllability>1.1.4 Controllability
<a class=anchor href=#114-controllability>#</a></h3><p>The controllability of a state space model implies the capability to transition any initial state to a final state through a finite control action within a finite duration. This assurance exists when the rank of matrix C matches the dimension of the previously defined state vector, represented as n.
For the actuation subsystem, n = 2, and matrix <span>\(\mathcal{C}\)
</span>is thus expressed as follows. Upon observation, it&rsquo;s evident that C holds a rank of 2, affirming the system&rsquo;s controllability.</p><span>\[\mathcal{C} = [B \quad AB] = \begin{bmatrix} \frac{1}{Lm} & -\frac{Rm}{L^2m} \\ 0 & \frac{Kt}{Jm Lm} \end{bmatrix}\]</span><h3 id=115-observability>1.1.5 Observability
<a class=anchor href=#115-observability>#</a></h3><p>Observability of a state space model implies the ability to deduce any initial state from the system output within a given time interval. This certainty prevails when the rank of the observability matrix <span>\(\mathcal{O}\)
</span>matches the dimension of the state vector.</p><p>Given the state vector&rsquo;s dimension as n = 2, the observability matrix <span>\(\mathcal{O}\)
</span>is defined according to equation 23. Upon inspection, it&rsquo;s evident that the resulting matrix has a rank of 2, affirming the system&rsquo;s observability.</p><span>\[\mathcal{O} = \begin{bmatrix} C \\ CA \end{bmatrix} = \begin{bmatrix} 0 & 1 \\ \frac{K_t}{J_m} & -\frac{B_m + 2K_q \Omega_o}{J_m} \end{bmatrix} \]</span><h2 id=12-movement-subsytem>1.2 Movement Subsytem
<a class=anchor href=#12-movement-subsytem>#</a></h2><p>To understand the movement subsystem, it&rsquo;s crucial to pinpoint the forces and moments within the system. The forces and moments are generated by the combined angular speeds of the rotors, as shown below:</p><span>\[T_i = K_T \Omega_i^2 \]
</span><span>\[Q_i = K_Q \Omega_i^2 \]
</span><span>\[F_p = \begin{bmatrix}
0 \\
0 \\
- \sum_{i=1}^{4} T_i \\
\end{bmatrix}\]
</span><span>\[M_p = \begin{bmatrix}
b \cdot \cos(\pi/4) \cdot (T_1 - T_2 - T_3 + T_4) \\
b \cdot \cos(\pi/4) \cdot (T_1 + T_2 - T_3 - T_4) \\
-Q_1 + Q_2 - Q_3 + Q_4 \\
\end{bmatrix}\]</span><p>The equations for the dynamics and kinematics are the following:</p><span>\[m\dot{v} = -\omega \times mv + F_p + F_a + F_g \\
J\dot{\omega} = -\omega \times J\omega + M_p \\
\dot{p} = Rv\\
\dot{\Phi} = S\omega\]</span><p>Considering the four angular velocities from the motors as inputs <span>\(\tilde{u} = \tilde{\Omega} = [\tilde{\Omega}_1, \tilde{\Omega}_2, \tilde{\Omega}_3, \tilde{\Omega}_4]\)
</span>and the twelve variables denoting both the linear and angular positions and velocities as the state <span>\(X = [\tilde{v}^T, \tilde{\omega}^T, \tilde{p}^T, \tilde{\Phi}^T]^T\)
</span>, the model is then represented:</p><span>\[\begin{bmatrix} \dot{\tilde{v}} \\ \dot{\tilde{\omega}} \\ \dot{\tilde{p}} \\ \dot{\tilde{\Phi}} \\ \end{bmatrix}
=
\begin{bmatrix} 0 & 0 & 0 & A_V \\ 0 & 0 & 0 & 0 \\ I_3 & 0 & 0 & 0 \\ 0 & I_3 & 0 & 0 \\ \end{bmatrix}
\begin{bmatrix} \tilde{v} \\ \tilde{\omega} \\ \tilde{p} \\ \tilde{\Phi} \\ \end{bmatrix}
+
\begin{bmatrix} B_V \\ B_{\omega} \\ 0 \\ 0 \\ \end{bmatrix}
\tilde{\Omega}\]</span><p>Where Av, Bv, Bω are given by:</p><span>\[A_V = \begin{bmatrix} 0 & -g & 0 \\ g & 0 & 0 \\ 0 & 0 & 0 \\ \end{bmatrix}, \quad B_V = \begin{bmatrix} 0 & 0 & 0 & 0 \\ g & 0 & 0 & 0 \\ -b_z -b_z -b_z -b_z \end{bmatrix}, \quad B_{\omega} = \begin{bmatrix} 0 & -b_p & 0 & b_p \\ b_q & 0 & -b_q & 0 \\ -b_q b_p -b_p b_p \\ \end{bmatrix}\]</span></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/roaked/roaked.github.io/edit/main/content/content/docs/2code/1drone/_index2.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#11-actuation-subsystem>1.1 Actuation Subsystem</a><ul><li><a href=#111-model-and-linearization>1.1.1 Model and Linearization</a></li><li><a href=#112-transfer-function-model>1.1.2 Transfer Function Model</a></li><li><a href=#113-stability>1.1.3 Stability</a></li><li><a href=#114-controllability>1.1.4 Controllability</a></li><li><a href=#115-observability>1.1.5 Observability</a></li></ul></li><li><a href=#12-movement-subsytem>1.2 Movement Subsytem</a></li></ul></nav></div></aside></main></body></html>