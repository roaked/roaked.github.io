<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="KUKA Robotics: From Kinematics to Motion Planning # To add report when I have time :)
important
I would at some point like to implement a safe reinforcement learning whilst heading for optimistic exploration within a large-scale manufacturing setting instead of defining a specific trajectory! I think it would turn out a very informative and interesting project!
1. Abstract # This research centers on the kinematic analysis of the KUKA KR6 R700 robot, which is installed on a linear KL100 axis."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="Robotics: Kin, Dynamics & Control"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://xsleaks.dev/docs/code/robotics/"><title>Robotics: Kin, Dynamics & Control | Ricardo Chin</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.b74e85bd7803de00c09a320dcf09ae0d7e37702a9918995f5fe9d1c71c55a223.css integrity="sha256-t06FvXgD3gDAmjINzwmuDX43cCqZGJlfX+nRxxxVoiM=" crossorigin=anonymous><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-10WQY47KS2"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-10WQY47KS2",{anonymize_ip:!1})}</script><link rel=alternate type=application/rss+xml href=https://xsleaks.dev/docs/code/robotics/index.xml title="Ricardo Chin"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Ricardo Chin</span></a></h2><ul><li class=book-section-flat><a href=/docs/design/>Design Repository</a><ul><li><a href=/docs/design/fea-beam-simulation/>FEA Beam Instability Modes</a><ul></ul></li><li><a href=/docs/design/industrial-crane-design/>Industrial Girder Crane</a><ul></ul></li><li><a href=/docs/design/finite-element-method-development/>FEM Package Development</a><ul></ul></li><li><a href=/docs/design/manual-transmission-design/>Gear Train Transmission</a><ul></ul></li><li><a href=/docs/design/electron-beam-tech/>Electron Beam Technology</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/docs/code/>Coding Repository</a><ul><li><a href=/docs/code/uav/>UAV Red Bull Air Racing</a><ul><li><a href=/docs/code/uav/dynamics/>Drone Dynamics</a></li><li><a href=/docs/code/uav/continuous-controller-design/>Drone Continuous Controller</a></li><li><a href=/docs/code/uav/discrete-controller-design/>Drone Discrete Controller</a></li><li><a href=/docs/code/uav/computer-vision/>Drone Computer Vision</a></li></ul></li><li><a href=/docs/code/agv/>AGV: System Identification</a><ul></ul></li><li><a href=/docs/code/deep-learning-fake-news/>Deep Learning on Fake News</a><ul></ul></li><li><a href=/docs/code/hamiltonian-graphs/hamiltonian/>Hamiltonian Paths: Linked Lists</a></li><li><a href=/docs/code/bin-packing/>EC Optimization: Space & Time</a><ul><li><a href=/docs/code/bin-packing/genetic-algorithm/>Genetic Algorithm</a></li><li><a href=/docs/code/bin-packing/particle-swarm-optimization/>Particle Swarm Optimization</a></li></ul></li><li><a href=/docs/code/robotics/ class=active>Robotics: Kin, Dynamics & Control</a><ul></ul></li><li><a href=/docs/code/snake-game/>Snake Game: Genetic RL-DQN</a><ul></ul></li><li><a href=/docs/code/micromouse/>Micromouse: Flood Fill to A*</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/docs/competitions/>Academic Competitions</a><ul><li><a href=/docs/competitions/fst/>Formula Student Lisbon</a></li><li><a href=/docs/competitions/thermocup/>ThermoCup</a></li></ul></li><li class=book-section-flat><a href=/docs/leet/>My LeetCode Solutions</a><ul></ul></li><li class=book-section-flat><a href=/docs/mod/>Website Modifications</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Robotics: Kin, Dynamics & Control</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#1-abstract>1. Abstract</a></li><li><a href=#2-kinematics>2. Kinematics</a></li><li><a href=#3-direct-kinematics>3. Direct Kinematics</a><ul><li><a href=#31-validation>3.1. Validation</a></li><li><a href=#32-joint-trajectories>3.2. Joint Trajectories</a></li></ul></li><li><a href=#4-inverse-kinematics>4. Inverse Kinematics</a></li></ul></nav></aside></header><article class=markdown><h1 id=kuka-robotics-from-kinematics-to-motion-planning>KUKA Robotics: From Kinematics to Motion Planning
<a class=anchor href=#kuka-robotics-from-kinematics-to-motion-planning>#</a></h1><p><a href=https://github.com/roaked/robotics-kinematics-dynamics-and-control>To add report when I have time :)</a></p><p><img src=https://blogs.mathworks.com/images/seth/2009Q2/Robot.gif alt=soakd></p><blockquote class="book-hint2 important"><p class="hint-title important"><svg class="book-icon"><use href="/svg/hint-icons.svg#important-notice"/></svg><span>important</span></p><ul><li>I would at some point like to implement a safe reinforcement learning whilst heading for optimistic exploration within a large-scale manufacturing setting instead of defining a specific trajectory!</li></ul><p>I think it would turn out a very informative and interesting project!</p></blockquote><h2 id=1-abstract>1. Abstract
<a class=anchor href=#1-abstract>#</a></h2><p>This research centers on the kinematic analysis of the KUKA KR6 R700 robot, which is installed on a linear KL100 axis. The KUKA KR6 R700 is an industrial robot designed for tasks such as tool and fixture handling, as well as processing or transferring components or products.</p><p>The initial phase of studying the robot involves analyzing and constructing its kinematic model based on the Denavit-Hartenberg convention, with a focus on selecting the link reference frames.</p><p>Presented and validated through various Simulink models, it is intended to ease the extraction of the robot&rsquo;s direct kinematics, inverse kinematics, geometric Jacobian, and Closed Loop Inverse Kinematics (CLIK).</p><h2 id=2-kinematics>2. Kinematics
<a class=anchor href=#2-kinematics>#</a></h2><p>The robot consists on the presence of 6 revolute joints. Additionally, there is a single prismatic joint that facilitates horizontal movement of the robot. Consequently, the overall configuration of the robot comprises a total of 7 links.</p><p><img src=https://live.staticflickr.com/65535/53469950810_c67521134d.jpg alt=1></p><p><img src=https://live.staticflickr.com/65535/53469851949_b3914f719c.jpg alt=2></p><p>Utilizing the convention of <a href=https://en.wikipedia.org/wiki/Denavit%E2%80%93Hartenberg_parameters>Denavit-Hartenberg (DH)</a>, reference frames for each link can be drawn.</p><p><img src=https://live.staticflickr.com/65535/53469851939_221cf7f814.jpg alt=3></p><p>The dimensions <code>a2</code>, <code>a3</code>, <code>a4</code>, <code>d5</code> and <code>d7</code> are known. Hence, the table of DH can be built.</p><table><thead><tr><th>Link</th><th><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>\(d_i\)
</span>[\m]</th><th><span>\(\vartheta_i\)
</span>[\rad]</th><th><span>\(a_i\)
</span>[\m]</th><th><span>\(\alpha_i\)
</span>[\rad]</th><th>offset [\rad]</th></tr></thead><tbody><tr><td>1</td><td><span>\(d_1\)</span></td><td>0</td><td>0</td><td><span>\(-\frac{\pi}{2}\)</span></td><td>0</td></tr><tr><td>2</td><td>0</td><td><span>\(\vartheta_2\)</span></td><td>0.025</td><td><span>\(\frac{\pi}{2}\)</span></td><td>0</td></tr><tr><td>3</td><td>0</td><td><span>\(\vartheta_3\)</span></td><td>0.315</td><td>0</td><td>0</td></tr><tr><td>4</td><td>0</td><td><span>\(\vartheta_4\)</span></td><td>0.035</td><td><span>\(\frac{\pi}{2}\)</span></td><td>0</td></tr><tr><td>5</td><td>-0.365</td><td><span>\(\vartheta_5\)</span></td><td>0</td><td><span>\(-\frac{\pi}{2}\)</span></td><td>0</td></tr><tr><td>6</td><td>0</td><td><span>\(\vartheta_6\)</span></td><td>0</td><td><span>\(\frac{\pi}{2}\)</span></td><td>0</td></tr><tr><td>7</td><td>-0.080</td><td><span>\(\vartheta_7\)</span></td><td>0</td><td><span>\(\pi\)</span></td><td>0</td></tr></tbody></table><p>For this robot, the vector of joint variables <code>q</code> can be expressed as:</p><span>\[q = [d1 \hspace{.2cm} \vartheta_2 \hspace{.2cm} \vartheta_3 \hspace{.2cm} \vartheta_4 \hspace{.2cm} \vartheta_5 \hspace{.2cm} \vartheta_6 \hspace{.2cm} \vartheta_7 ]^T\]</span><h2 id=3-direct-kinematics>3. Direct Kinematics
<a class=anchor href=#3-direct-kinematics>#</a></h2><p>Through the direct kinematics analysis, one can compute the position and orientation of the end effector by considering the values of the joint variables within the vector <code>q</code>.</p><span>\[A_{i}^{i-1} = \begin{bmatrix}
R_{i}^{i-1} & r_{i-1, i}^{i-1} \\
0^T & 1
\end{bmatrix}\]</span><p><code>R</code> being the rotation matrix from link <code>i-1</code> to <code>i</code> and <code>r</code> the position vector from link <code>i-1</code> to <code>i</code>. Generalizing for a joint variable <span>\(\vartheta_i\)
</span>:</p><span>\[A_{i-1}^{i}(\theta_i) = \begin{bmatrix}
c_i & -s_i c_i & s_i c_i & a_i c_i \\
s_i & c_i c_i & -c_i s_i & a_i s_i \\
0 & s_i & c_i & d_i \\
0 & 0 & 0 & 1
\end{bmatrix}\]</span><p>The transformation matrix for 7 links:</p><span>\[T_7^0 = A_1^0 A_2^1 A_3^2 A_4^3 A_4^5 A_6^5 A_7^6\]</span><p>In MATLAB, the calculations described are executed using the functions <a href=https://github.com/roaked/robotics-kinematics-dynamics-and-control/blob/main/DKin.m>DKin.m</a> and <a href=https://github.com/roaked/robotics-kinematics-dynamics-and-control/blob/main/DHTransf.m>DHTransf.m</a>. These functions were initially provided as a toolbox, and <a href=https://github.com/roaked/robotics-kinematics-dynamics-and-control/blob/main/DKin.m>DKin.m</a> was modified to include the computation of the Jacobian matrix for future use. A MATLAB Function Block was then crafted from these functions, integrated into the Simulink model. This block takes the <code>q</code> vector as inputs and outputs the rotation matrix, position vector, and Jacobian matrix.</p><p>Another essential function, <a href=https://github.com/roaked/robotics-kinematics-dynamics-and-control/blob/main/vrrobot.m>vrrobot.m</a>, is employed to create a virtual representation of the robot within a simulated environment. By adding meshes to the links, the robot gains a tangible form beyond just reference frames.</p><p>The resulting Simulink model incorporates two input options for the <code>q</code> vector: sliders or trajectory. The <code>q</code> vector is fed into both the direct kinematics block and the animation block (VR sink), providing a comprehensive visualization of the robot&rsquo;s movements.</p><p><img src=https://live.staticflickr.com/65535/53469950785_90a2919709_c.jpg alt=4></p><h3 id=31-validation>3.1. Validation
<a class=anchor href=#31-validation>#</a></h3><h4 id=311-pose-one>3.1.1. Pose One
<a class=anchor href=#311-pose-one>#</a></h4><p>The initial validation involves inputting a set of known coordinates, denoted as <code>q</code>, and verifying if the resulting rotation matrix and position vector of the end effector align with the anticipated outcomes. During this validation process, certain adjustments to the offsets were necessary. Specifically, a -90º offset was applied to joint <code>q4</code>, and a +180º offset was applied to joint <code>q7</code>, with these values determined through the validation process. To define the <code>q</code> vector, sliders were employed.</p><p>A significant consideration is that the base reference frame used for validation differs from the zeroth frame defined in the kinematic model (frame 0). This distinction is illustrated when observing the robot in the virtual world. To enhance representation, the x-axis is depicted in red, the y-axis in green, and the z-axis in blue. Additionally, a distance d1 was set to separate the robot from frame 0, ensuring accurate validation.</p><p><img src=https://live.staticflickr.com/65535/53469533961_844a2cbdc2_z.jpg alt=5></p><p>Thus, a transformation from the base reference frame to frame 0 becomes necessary, encompassing both rotation and translation. The rotational aspect is characterized by:</p><span>\[R_{0}^b = \begin{bmatrix}
0 & 0 & -1 \\
1 & 0 & 0 \\
0 & -1 & 0
\end{bmatrix}\]</span><p>Therefore the rotation matrix from base to end effector is defined as:</p><span>\[R_7^b = R_0^b R_7^0\]</span><p>Simultaneously, the translation using the position vector:</p><span>\[r_{b,0}^b = [0 \hspace{.2cm} 0 \hscape{.2cm} 0.756 ]^T\]</span><p>The position vector from base to end effector is defined as:</p><span>\[r_{b,7}^b = r_{b,0}^b + r_{0,7}^b = r_{b,0}^b + R_{0}^b \hscape{.1cm} r_{0,7}^0\]</span><p>Analytical results are:</p><span>\[R_{7}^b = \begin{bmatrix}
0 & -1 & 0 \\
0 & 0 & 1 \\
-1 & 0 & 0
\end{bmatrix}\]
</span><span>\[r_{b,7}^b = [0 \hscape{.2cm} 0.470 \hscape{.2cm} 1.106]^T [\m] \]</span><p>Simulink results given by:</p><p><img src=https://live.staticflickr.com/65535/53469851914_780545e45b_z.jpg alt=6></p><p><img src=https://live.staticflickr.com/65535/53468628947_f0e300b867_c.jpg alt=7></p><h4 id=312-pose-two>3.1.2. Pose Two
<a class=anchor href=#312-pose-two>#</a></h4><p>Analytical results are:</p><span>\[R_{7}^b = \begin{bmatrix}
0.249 & -0.457 & 0.854 \\
-0.957 & -0.251 & 0.145 \\
0.148 & -0.853 & -0.500
\end{bmatrix}\]
</span><span>\[r_{b,7}^b = [0.20163 \hscape{.2cm} 0.44482 \hscape{.2cm} 0.97382]^T [\m] \]</span><p>Simulink results given by:</p><p><img src=https://live.staticflickr.com/65535/53469533951_c423d1b57f_z.jpg alt=8></p><p><img src=https://live.staticflickr.com/65535/53469533956_5b76d48ea0_c.jpg alt=9></p><h3 id=32-joint-trajectories>3.2. Joint Trajectories
<a class=anchor href=#32-joint-trajectories>#</a></h3><p>To conduct further testing of the direct kinematics, a series of joint trajectories was incorporated into the Simulink model, selectable by manipulating a manual switch. Initially, a set of ramps was chosen for the inputs, with the exception of joint <code>q1</code>, where a sine input was employed. This decision was made to avoid impractical robot movement away from the base, given the nature of a ramp input. Each ramp trajectory was individually examined to ensure that the robot&rsquo;s motion aligned with the anticipated behaviour.</p><p>For instance, a specific scenario involved fixing all joints except for <code>q2</code>, which theoretically should result in the robot spinning around itself. To validate this trajectory, an XY plot was generated from the base reference frame to visually confirm the expected movement.</p><p><img src=https://live.staticflickr.com/65535/53469851894_5d06d7bd7d_b.jpg alt=10></p><p>Another test involved applying sinusoidal inputs to all joints simultaneously. This particular test proved valuable as it enabled the movement of all joints concurrently without the risk of robot links intersecting or colliding with each other, a scenario not feasible in a physical robot.</p><p><img src=https://live.staticflickr.com/65535/53469533946_d84d6bd8d9.jpg alt=11></p><h2 id=4-inverse-kinematics>4. Inverse Kinematics
<a class=anchor href=#4-inverse-kinematics>#</a></h2></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/roaked/roaked.github.io/commit/97887e7db0dd4b87abf2437e2d6f922ca15cb1a8 title='Last modified by roaked | January 17, 2024' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>January 17, 2024</span></a></div><div><a class="flex align-center" href=https://github.com/roaked/roaked.github.io/edit/main/content/content/docs/code/robotics/_index.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Ricardo Chin</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#1-abstract>1. Abstract</a></li><li><a href=#2-kinematics>2. Kinematics</a></li><li><a href=#3-direct-kinematics>3. Direct Kinematics</a><ul><li><a href=#31-validation>3.1. Validation</a></li><li><a href=#32-joint-trajectories>3.2. Joint Trajectories</a></li></ul></li><li><a href=#4-inverse-kinematics>4. Inverse Kinematics</a></li></ul></nav></div></aside></main></body></html>